<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我要做 Bistro 主理人</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="templates/elegant.css">
    <link rel="stylesheet" href="templates/minimalist.css">
    <script src="vendor/html2canvas.min.js"></script>
    <script src="templates/elegant.js"></script>
    <script src="templates/minimalist.js"></script>
    <script src="templates/yunguichuan.js"></script>
</head>
<body>

    <div class="top-bar">
        <span>🍳 伪精致 Bistro 生成器</span>
    </div>

    <div class="main-container">
        <header>
            <h1>我要做 <strong>Bistro</strong> 主理人</h1>
            <p class="subtitle">输入你的身份描述，生成专属的伪精致餐厅</p>
            <p class="quote">“在平凡中寻找不平凡，在普通中创造奇迹”</p>
        </header>

        <div class="input-area">
            <textarea id="identity-input" rows="5" placeholder="例如：我是一个热爱咖啡的程序员，周末喜欢看书写代码，梦想开一家小店..."></textarea>
            <div class="textarea-decorator">✨</div>
        </div>

        <div class="controls-area">
            <div class="template-selector">
                <label>模板:</label>
                <div class="button-group" id="template-selector-group">
                    <button class="btn-group-item active" data-template="elegant">典雅</button>
                    <button class="btn-group-item" data-template="minimalist">极简</button>
                    <button class="btn-group-item" data-template="yunguichuan">云贵川</button>
                </div>
            </div>
            <div class="ai-template-controls">
                <button id="create-ai-template-btn" class="btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L14.09 8.26L20 10.35L14.09 12.44L12 18.7L9.91 12.44L4 10.35L9.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    </svg>
                    创建AI模版
                </button>
                <button id="manage-templates-btn" class="btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V7M3 7L5 21H19L21 7M3 7H21M9 11V17M15 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    管理模版
                </button>
            </div>
            <div class="size-controls">
                <div class="slider-group">
                    <label for="width-slider">宽度: <span id="width-value">800</span>px</label>
                    <input type="range" id="width-slider" min="400" max="1200" value="800">
                </div>
                <div class="slider-group">
                    <label>高度: 自动</label>
                </div>
            </div>
        </div>

        <button id="generate-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L14.09 8.26L20 10.35L14.09 12.44L12 18.7L9.91 12.44L4 10.35L9.91 8.26L12 2Z" stroke="white" stroke-width="2" stroke-linejoin="round"/></svg>
            <span>生成我的 Bistro</span>
        </button>

        <p class="hint">💡 提示：描述越详细，生成的 Bistro 越个性化</p>
    </div>

    <div id="menu-container" style="display: none;">
        <!-- Image will be inserted here directly by script -->
        <p class="save-hint" style="display: none;">长按或右键点击图片即可保存</p>
    </div>

    <!-- AI模版创建弹窗 -->
    <div id="ai-template-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>创建AI模版</h2>
                <button class="modal-close" id="close-ai-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-method-selector">
                    <div class="button-group">
                        <button class="btn-group-item active" data-method="text">文字描述</button>
                        <button class="btn-group-item" data-method="image">上传图片</button>
                    </div>
                </div>
                
                <div id="text-input-area" class="input-area-modal">
                    <label for="template-description">描述你想要的菜单风格：</label>
                    <textarea id="template-description" rows="4" placeholder="例如：现代简约风格，黑白配色，大字体标题，网格布局..."></textarea>
                </div>
                
                <div id="image-input-area" class="input-area-modal" style="display: none;">
                    <label>上传菜单图片：</label>
                    <div class="image-upload-zone" id="image-upload-zone">
                        <div class="upload-placeholder">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 15V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V15M17 8L12 3M12 3L7 8M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <p>点击或拖拽图片到此处</p>
                            <p class="upload-hint">支持 JPG, PNG 格式</p>
                        </div>
                        <input type="file" id="image-file-input" accept="image/*" style="display: none;">
                        <div id="image-preview" style="display: none;">
                            <img id="preview-image" src="" alt="预览图片">
                            <button id="remove-image" class="btn-remove">移除图片</button>
                        </div>
                    </div>
                </div>
                
                <div class="template-name-input">
                    <label for="template-name">模版名称：</label>
                    <input type="text" id="template-name" placeholder="我的自定义模版">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-ai-template" class="btn-secondary">取消</button>
                <button id="generate-ai-template" class="btn-primary">生成模版</button>
            </div>
        </div>
    </div>

    <!-- 模版管理弹窗 -->
    <div id="template-manager-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>模版管理</h2>
                <button class="modal-close" id="close-manager-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="template-manager-actions">
                    <button id="import-template-btn" class="btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V15M7 10L12 15M12 15L17 10M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        导入模版
                    </button>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </div>
                <div id="template-list" class="template-list">
                    <!-- AI模版列表将在这里动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>🍿 由 Cline Agent 开发 | 专业的伪精致餐厅生成器</p>
        <p>"让平凡的生活在反讽中闪闪发光"</p>
        <p>
            <a href="https://www.xiaohongshu.com/user/profile/66e8cbe7000000001d020533" target="_blank" class="author-link-footer">
                📱 作者：M4tr1x
            </a>
            |
            <a href="https://github.com/faithleysath/bistro-gen" target="_blank" class="github-link-footer">
                🔗 源码
            </a>
            |
            <a href="https://kcnxxrk5hrp3.feishu.cn/share/base/form/shrcngfTaXTAKkFVhtAuJ3YNj8e" target="_blank" class="feedback-link-footer">
                💬 反馈建议
            </a>
        </p>
    </footer>

    <script src="scripts/main.js" defer></script>
</body>
</html>
